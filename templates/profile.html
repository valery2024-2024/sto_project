<form methot="POST">
  <div class="profile-container">
      <h1>–ü—Ä–∏–≤—ñ—Ç, {{ user_name }}!</h1>
      <p>Email: {{ user_email }}</p>
      <p>–†–æ–ª—å: {% if user.is_admin %} –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä {% else %} –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á {% endif %}</p>
      <div class="profile-buttons">
          <a href="{{ url_for('logout') }}" class="logout-btn">–í–∏–π—Ç–∏ üö™</a>
          <a href="{{ url_for('change_password') }}" class="password-btn">üîë –ó–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–æ–ª—å</a>
          <a href="{{ url_for('home') }}" class="home-btn">üè† –ù–∞ –≥–æ–ª–æ–≤–Ω—É</a>
          <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}?v=2">
      </div>
  </div>
</form>
<script>
  async function loadProfile() {
      let token = localStorage.getItem("access_token");
      if (!token) {
          console.log("‚ùå –¢–æ–∫–µ–Ω –≤—ñ–¥—Å—É—Ç–Ω—ñ–π! –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –Ω–∞ –≤—Ö—ñ–¥.");
          window.location.href = "/login";
          return;
      }

      let response = await fetch("/profile", {
          method: "GET",
          headers: {
              "Authorization": "Bearer " + token,  // ‚úÖ –ü–µ—Ä–µ–¥–∞—î–º–æ —Ç–æ–∫–µ–Ω —É –∑–∞–≥–æ–ª–æ–≤–∫—É
              "Content-Type": "application/json"
          }
      });

      let data = await response.json();

      if (response.ok) {
          document.getElementById("user-name").innerText = data.name;
          document.getElementById("user-email").innerText = data.email;
      } else {
          alert("‚ùå –ü–æ–º–∏–ª–∫–∞ –¥–æ—Å—Ç—É–ø—É: " + (data.msg || "–ù–µ–≤—ñ–¥–æ–º–∞ –ø–æ–º–∏–ª–∫–∞"));
          window.location.href = "/login";
      }
  }

  loadProfile();
</script>

<h2>–ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</h2>
<p>–Ü–º'—è: <span id="user-name"></span></p>
<p>Email: <span id="user-email"></span></p>
